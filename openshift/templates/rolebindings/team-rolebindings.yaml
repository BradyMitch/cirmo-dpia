apiVersion: template.openshift.io/v1
kind: Template
metadata:
  name: ${APPLICATION_NAME}-template
labels:
  template: ${APPLICATION_NAME}-template
objects:
- apiVersion: rbac.authorization.k8s.io/v1
  kind: RoleBinding
  metadata:
    annotations:
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"rbac.authorization.k8s.io/v1","kind":"RoleBinding","metadata":{"annotations":{},"labels":{"devops.gov.bc.ca/argocd-app":"b996e6","environment":"dev","name":"b996e6","provisioned-by":"argocd"},"name":"platform-services-controlled-admin","namespace":"b996e6-dev"},"roleRef":{"apiGroup":"rbac.authorization.k8s.io","kind":"ClusterRole","name":"admin"},"subjects":[{"kind":"ServiceAccount","name":"bcdevops-admin","namespace":"openshift"},{"apiGroup":"rbac.authorization.k8s.io","kind":"User","name":"akroon3r@github"},{"apiGroup":"rbac.authorization.k8s.io","kind":"User","name":"antsand@github"},{"apiGroup":"rbac.authorization.k8s.io","kind":"User","name":"bethanyfrei@github"}]}
    labels:
      devops.gov.bc.ca/argocd-app: ${LICENSE_PLATE}
      environment: dev
      name: ${LICENSE_PLATE}
      provisioned-by: argocd
    name: platform-services-controlled-admin
    namespace: ${LICENSE_PLATE}-${ENVIRONMENT}
  roleRef:
    apiGroup: rbac.authorization.k8s.io
    kind: ClusterRole
    name: admin
  subjects:
  - kind: ServiceAccount
    name: bcdevops-admin
    namespace: openshift
  - apiGroup: rbac.authorization.k8s.io
    kind: User
    name: akroon3r@github
  - apiGroup: rbac.authorization.k8s.io
    kind: User
    name: antsand@github
  - apiGroup: rbac.authorization.k8s.io
    kind: User
    name: bethanyfrei@github

parameters:
  - description: Application Name
    displayName: AppName
    name: APPLICATION_NAME
    required: true
    value: dpia
  - description: Environment
    displayName: Environment
    name: ENVIRONMENT
    required: true
    value: dev
  - description: License Plate
    displayName: License Plate
    name: LICENSE_PLATE
    required: true
    value: b996e6
